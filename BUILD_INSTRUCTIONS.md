# Build Instructions

## Important: Run Code Generation

After pulling the latest changes, you MUST run code generation to create the freezed files:

```bash
dart run build_runner build --delete-conflicting-outputs
```

This will generate:
- `lib/core/error/failures.freezed.dart`
- `lib/core/database/app_database.g.dart` (Drift database - Phase 9)
- `lib/features/offline/domain/entities/*.freezed.dart` (Offline entities - Phase 9)
- `lib/features/offline/presentation/providers/offline_providers.g.dart` (Riverpod - Phase 9)
- Any other `.g.dart`, `.freezed.dart`, or `.gr.dart` files

**Note:** These generated files are gitignored, so you'll need to run this command after every pull.

## Quick Start Commands

```bash
# Install dependencies
flutter pub get

# Generate code (freezed, riverpod, drift, etc.)
dart run build_runner build --delete-conflicting-outputs

# Watch mode (auto-regenerate on changes)
dart run build_runner watch --delete-conflicting-outputs

# Clean and rebuild
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs

# Run the app
flutter run --dart-define=GEMINI_API_KEY=your_key_here
```

## Firebase Setup (Phase 1.2)

If you haven't configured Firebase yet, see the Phase 1.2 instructions in the main conversation.

## Project Structure

- `lib/core/` - Core infrastructure (theme, constants, errors, utils, database)
- `lib/features/` - Feature modules (auth, profiles, stories, offline, etc.)
- `assets/` - Images, icons, stories, fonts

## Phase 9: Offline Support

Phase 9 adds offline story downloads using Drift (SQLite). Key features:
- Download stories for offline reading
- Local image caching
- Subscription-based download limits (Free: 0, Premium: 10, Premium+: unlimited)
- Progress tracking and storage management
- Data synchronization with cloud

**See `PHASE_9_OFFLINE_SUPPORT.md` for complete documentation.**

## Common Issues

### Build Runner Conflicts
```bash
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs
```

### Firebase Not Configured
Make sure you have:
- `lib/firebase_options.dart` (generated by flutterfire configure)
- `android/app/google-services.json`
